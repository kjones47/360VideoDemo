<!DOCTYPE html>
<html>
<head>
	<title>360 Video Projection Demo</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- Bootstrap CSS-->
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css">
    <!-- Google fonts-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Cardo:400,400i">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700">
    <!-- Lightbox-->
    <link rel="stylesheet" href="vendor/lightbox2/css/lightbox.min.css">
    <!-- Font Awesome-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <!-- Parallax-->
    <link rel="stylesheet" href="vendor/onepage-scroll/onepage-scroll.css">
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="css/style.default.css" id="theme-stylesheet">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="css/custom.css">
	<!-- CSS -->
	<link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
	<link rel="stylesheet" href="css/style.default.css" id="theme-stylesheet">
	<!--<link rel="stylesheet" href="css/kentheme.css" id="theme-stylesheet">
	<!-- JAVASCRIPT -->
	<script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
	<script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
	<!-- THREEJS -->
	<script src="myjs/three.js"></script>
	<script src="myjs/video.js"></script>
	<script src="myjs/OrbitControls.js"></script>
	<script src="myjs/WebGL.js"></script>
	<!--Videos-->
	<video id="equiVid" loop muted crossOrigin="anonymous" webkit-playsinline style="display:none;">
			<source src="https://raw.githubusercontent.com/kjones47/Projections360/gh-pages/oriontestvideo.mp4" type='video/mp4'>
	</video>
	<video id="eacVid" crossorigin="anonymous" autoplay loop style="display:none" controls>
			<source src="https://raw.githubusercontent.com/kjones47/Projections360/gh-pages/oriontestvideo_EAC.mp4" type='video/mp4'>
	</video>
	<video id="barrelVid" crossorigin="anonymous" autoplay loop style="display:none" controls>
			<source src="https://raw.githubusercontent.com/kjones47/Projections360/gh-pages/oriontestvideo_BARR2.mp4" type='video/mp4'>
	</video>
	<video id="video" crossorigin="anonymous" autoplay loop style="display:none" controls>
			<source src="https://raw.githubusercontent.com/kjones47/Projections360/gh-pages/oriontestvideo.mp4" type='video/mp4'>
	</video>

</head>
<body>
<!-- Start of first page -->
<div data-role="page" id="page1">
		<section class="bg-cover bg-center hero">
        <div class="dark-overlay"></div>
        <div class="position-relative z-index-1">
          <div class="container text-center text-white">
            <p class="font-italic lead">Welcome.</p>
            <h1 class="text-uppercase my-4">360-Degree Video Spherical Projections Demo</h1>
            <p class="font-italic lead">Click the arrow to start</p>
          </div>
        </div>
        <a href="#page2" data-transition="slide"><div id="startbutton" class="scroll-btn link-scroll"><i class="fas fa-angle-double-right"></i></div></a>
      </section>
</div><!-- /page -->

<!-- Start of second page -->
<div data-role="page" id="page2">
		<!-- PAGE 2 - THE PROJECTIONS -->
      <section>
	    <h2 class="text-uppercase" >Part I: Spherical Projections</h2>
		<h4 class="font-italic lead lined"> To create a 360-degree video, we take a video and map it onto a specific geometry after formatting. </h4>
	  <div class="flex-container">
	  <div id="equi3d"></canvas>
		<script>
			var equi3d = document.getElementById("equi3d");
			var CANVAS_WIDTH = 250;
			var CANVAS_HEIGHT = 250;

			var equiScene = new THREE.Scene();
			var equiCamera = new THREE.PerspectiveCamera(55, CANVAS_WIDTH / CANVAS_HEIGHT, 0.1, 100);

			var equiRenderer = new THREE.WebGLRenderer();
			equiRenderer.setClearColor(0x000, 1.0);
			equiRenderer.setSize(CANVAS_WIDTH, CANVAS_HEIGHT);
			equi3d.appendChild(equiRenderer.domElement);
			
			var equiVid = document.getElementById( 'equiVid' );
			equiVid.play();
			var textureEqui = new THREE.VideoTexture( equiVid );
			
			var equiGeo = new THREE.SphereBufferGeometry(3, 28, 28 );
			equiGeo.scale(-1,1,1);
			var equiMat = new THREE.MeshBasicMaterial( { map: textureEqui, side: THREE.DoubleSide } );
			var equiMesh = new THREE.Mesh( equiGeo, equiMat );
			equiScene.add( equiMesh );
			
			var equiControls = new THREE.OrbitControls( equiCamera, equiRenderer.domElement );
			equiControls.minDistance = 1;
			equiControls.maxDistance = 7;
			
			equiCamera.position.z = 6;

			var equiAnimate = function () {
				requestAnimationFrame( equiAnimate );

				//equiMesh.rotation.x += 0.01;
				equiMesh.rotation.y += 0.01;

				equiRenderer.render( equiScene, equiCamera );
			};

			equiAnimate();
		
		var h5equi = document.createElement("H5");
		h5equi.setAttribute("id", "h5equi");
		var t_equi = document.createTextNode("Equi-Rectangular");
		h5equi.appendChild(t_equi);
		document.getElementById("equi3d").appendChild(h5equi);
			
		</script><h6 style="font-size:15px">Geometry: Sphere</h6></div>
	 <div id="cube3d"></canvas>
		<script>
			var cube3d = document.getElementById("cube3d");
			var CANVAS_WIDTH = 250;
			var CANVAS_HEIGHT = 250;

			var cubeScene = new THREE.Scene();
			var cubeCamera = new THREE.PerspectiveCamera(45, CANVAS_WIDTH / CANVAS_HEIGHT, 0.1, 100);

			var cubeRenderer = new THREE.WebGLRenderer();
			cubeRenderer.setClearColor(0x000, 1.0);
			cubeRenderer.setSize(CANVAS_WIDTH, CANVAS_HEIGHT);
			cube3d.appendChild(cubeRenderer.domElement);
			
			var materialArray = [];
			var ft = new THREE.TextureLoader().load('https://raw.githubusercontent.com/FinweLtd/orion360-sdk-test-content/master/set1/cube/Orion360_test_image_front.png');
			var bk = new THREE.TextureLoader().load('https://raw.githubusercontent.com/FinweLtd/orion360-sdk-test-content/master/set1/cube/Orion360_test_image_back.png');
			var lt = new THREE.TextureLoader().load('https://raw.githubusercontent.com/FinweLtd/orion360-sdk-test-content/master/set1/cube/Orion360_test_image_top.png');
			var rt = new THREE.TextureLoader().load('https://raw.githubusercontent.com/FinweLtd/orion360-sdk-test-content/master/set1/cube/Orion360_test_image_bottom.png');
			var tp = new THREE.TextureLoader().load('https://raw.githubusercontent.com/FinweLtd/orion360-sdk-test-content/master/set1/cube/Orion360_test_image_left.png');
			var bm = new THREE.TextureLoader().load('https://raw.githubusercontent.com/FinweLtd/orion360-sdk-test-content/master/set1/cube/Orion360_test_image_right.png');
			//MAKE TEXTURE FACES
			materialArray.push(new THREE.MeshBasicMaterial({map: ft}));
			materialArray.push(new THREE.MeshBasicMaterial({map: bk}));
			materialArray.push(new THREE.MeshBasicMaterial({map: lt}));
			materialArray.push(new THREE.MeshBasicMaterial({map: rt}));
			materialArray.push(new THREE.MeshBasicMaterial({map: tp}));
			materialArray.push(new THREE.MeshBasicMaterial({map: bm}));
			
			for(let i=0;i<6;i++){
				materialArray[i].side = THREE.DoubleSide;
			}

			var cubeGeo = new THREE.BoxGeometry( 3, 3, 3 );
			cubeGeo.scale(-1, 1, 1);
			var cubeMesh = new THREE.Mesh( cubeGeo, materialArray );
			cubeScene.add( cubeMesh );
			
			var cubeControls = new THREE.OrbitControls( cubeCamera, cubeRenderer.domElement );
			cubeControls.minDistance = 1;
			cubeControls.maxDistance = 7;
			
			cubeCamera.position.z = 1;

			var cubeAnimate = function () {
				requestAnimationFrame( cubeAnimate );

				//cubeMesh.rotation.x += 0.01;
				cubeMesh.rotation.y += 0.01;

				cubeRenderer.render( cubeScene, cubeCamera );
			};

			cubeAnimate();
			
		var h5cube = document.createElement("H5");
		h5cube.setAttribute("id", "h5cube");
		var t_cube = document.createTextNode("Cubic");
		h5cube.appendChild(t_cube);
		document.getElementById("cube3d").appendChild(h5cube);
		</script>
		<h6 style="font-size:15px">Geometry: Cube</h6></div>
	  </div><div class="flex-container"><div id="eac3d"></canvas>
		<script>
			var eac3d = document.getElementById("eac3d");
			var CANVAS_WIDTH = 250;
			var CANVAS_HEIGHT = 250;

			var eacScene = new THREE.Scene();
			var eacCamera = new THREE.PerspectiveCamera(55, CANVAS_WIDTH / CANVAS_HEIGHT, 0.1, 100);

			var eacRenderer = new THREE.WebGLRenderer();
			eacRenderer.setClearColor(0x000, 1.0);
			eacRenderer.setSize(CANVAS_WIDTH, CANVAS_HEIGHT);
			eac3d.appendChild(eacRenderer.domElement);
			
			eacVid = document.getElementById( 'eacVid' );
		//	eacVid.play();
			eacVidTexture = new THREE.VideoTexture( eacVid );
			eacVidTexture.minFilter = THREE.LinearFilter;
			eacVidTexture.magFilter = THREE.LinearFilter;
			eacVidTexture.format = THREE.RGBFormat;
			
			var face4 = [new THREE.Vector2(0, .5), new THREE.Vector2(.3333, .5), new THREE.Vector2(.3333, 1), new THREE.Vector2(0, 1)];
			var face3 = [new THREE.Vector2(.3333, .5), new THREE.Vector2(.6666, .5), new THREE.Vector2(.6666, 1), new THREE.Vector2(.3333, 1)]; 
			var face1 = [new THREE.Vector2(.6666, .5), new THREE.Vector2(1, .5), new THREE.Vector2(1, 1), new THREE.Vector2(.6666, 1)]; //left
			var face2 = [new THREE.Vector2(0, 0), new THREE.Vector2(.3333, 0), new THREE.Vector2(.3333, .5), new THREE.Vector2(0, .5)]; //right
			var face5 = [new THREE.Vector2(.3333, 0), new THREE.Vector2(.6666, 0), new THREE.Vector2(.6666, .5), new THREE.Vector2(.3333, .5)]; //front
			var face6 = [new THREE.Vector2(1, .5), new THREE.Vector2(.6666, .5), new THREE.Vector2(.6666, 0), new THREE.Vector2(1, 0)]; //bottom
			
			var eacGeo = new THREE.BoxGeometry( 3, 3, 3 );
			eacGeo.faceVertexUvs[0] = [];

			eacGeo.faceVertexUvs[0][0] = [face1[0], face1[1], face1[3]];
			eacGeo.faceVertexUvs[0][1] = [face1[1], face1[2], face1[3]];

			eacGeo.faceVertexUvs[0][2] = [face2[0], face2[1], face2[3]];
			eacGeo.faceVertexUvs[0][3] = [face2[1], face2[2], face2[3]];

			eacGeo.faceVertexUvs[0][4] = [face3[0], face3[1], face3[3]];
			eacGeo.faceVertexUvs[0][5] = [face3[1], face3[2], face3[3]];

			eacGeo.faceVertexUvs[0][6] = [face4[0], face4[1], face4[3]];
			eacGeo.faceVertexUvs[0][7] = [face4[1], face4[2], face4[3]];

			eacGeo.faceVertexUvs[0][8] = [face5[0], face5[1], face5[3]];
			eacGeo.faceVertexUvs[0][9] = [face5[1], face5[2], face5[3]];

			eacGeo.faceVertexUvs[0][10] = [face6[0], face6[1], face6[3]];
			eacGeo.faceVertexUvs[0][11] = [face6[1], face6[2], face6[3]];
			
			eacGeo.rotateY(Math.PI/2);
			eacGeo.rotateX(Math.PI/2);
			eacGeo.scale( -1, 1, 1);
			var eacMat = new THREE.MeshBasicMaterial( { map: eacVidTexture, side:THREE.DoubleSide } );
			var eacMesh = new THREE.Mesh( eacGeo, eacMat );
			eacScene.add( eacMesh );
			
			var eacControls = new THREE.OrbitControls( eacCamera, eacRenderer.domElement );
			eacControls.minDistance = 1;
			eacControls.maxDistance = 7;
			
			eacCamera.position.z = 5;

			var eacAnimate = function () {
				requestAnimationFrame( eacAnimate );

				//eacMesh.rotation.x += 0.01;
				eacMesh.rotation.y += 0.01;

				eacRenderer.render( eacScene, eacCamera );
			};

			eacAnimate();
			
		var h5eac = document.createElement("H5");
		h5eac.setAttribute("id", "h5eac");
		var t_eac = document.createTextNode("Equi-Angular Cubic");
		h5eac.appendChild(t_eac);
		document.getElementById("eac3d").appendChild(h5eac);
		</script>
		<h6 style="font-size:15px">Geometry: Cube</h6>
		<p>More accurately placed pixels</p></div>
		<div id="barrel3d"></canvas>
		<script>
			var barrel3d = document.getElementById("barrel3d");
			var CANVAS_WIDTH = 250;
			var CANVAS_HEIGHT = 250;

			var barrelScene = new THREE.Scene();
			var barrelCamera = new THREE.PerspectiveCamera(45, CANVAS_WIDTH / CANVAS_HEIGHT, 0.1, 100);

			var barrelRenderer = new THREE.WebGLRenderer();
			barrelRenderer.setClearColor(0x000, 1.0);
			barrelRenderer.setSize(CANVAS_WIDTH, CANVAS_HEIGHT);
			barrel3d.appendChild(barrelRenderer.domElement);
			
			barrelVid = document.getElementById( 'barrelVid' );
		//	eacVid.play();
			barrelVidTexture = new THREE.VideoTexture( barrelVid );
			barrelVidTexture.minFilter = THREE.LinearFilter;
			barrelVidTexture.magFilter = THREE.LinearFilter;
			barrelVidTexture.format = THREE.RGBFormat;

			var cube = new THREE.BoxGeometry( 1, 1, 1 );
			var barrelGeo2 = new THREE.SphereGeometry( .75, 18, 18 );
			var barrelMat1 = new THREE.MeshBasicMaterial( { map: barrelVidTexture } );
			var barrelMat2 = new THREE.MeshBasicMaterial( { map: barrelVidTexture, side:THREE.BackSide } );
			
		//bottom
			var face1 = [new THREE.Vector2(0.8, 0), new THREE.Vector2(1, 0), new THREE.Vector2(1, .5), new THREE.Vector2(0.8, .5)];
				//top
			var face2 = [new THREE.Vector2(0.8, .5), new THREE.Vector2(1, 0.5), new THREE.Vector2(1, 1), new THREE.Vector2(0.8, 1)]; 
				
			cube.faceVertexUvs[0] = [];
				
			cube.faceVertexUvs[0][2] = [face2[0], face2[1], face2[3]];
			cube.faceVertexUvs[0][3] = [face2[1], face2[2], face2[3]];

			cube.faceVertexUvs[0][0] = [face1[0], face1[1], face1[3]];
			cube.faceVertexUvs[0][1] = [face1[1], face1[2], face1[3]];
			
			var barrelMesh1 = new THREE.Mesh( cube, barrelMat1 );
			var barrelMesh2 = new THREE.Mesh( barrelGeo2, barrelMat2 );
			barrelScene.add( barrelMesh1 );
			barrelScene.add( barrelMesh2 );
			
			var barrelControls = new THREE.OrbitControls( barrelCamera, barrelRenderer.domElement );
			barrelControls.minDistance = 2;
			barrelControls.maxDistance = 7;
			
			barrelCamera.position.z = 4;

			var barrelAnimate = function () {
				requestAnimationFrame( barrelAnimate );

				barrelMesh1.rotation.y += 0.01;
				barrelMesh2.rotation.y += 0.01;

				barrelRenderer.render( barrelScene, barrelCamera );
			};

			barrelAnimate();
			
		var h5barrel = document.createElement("H5");
		h5barrel.setAttribute("id", "h5barrel");
		var t_barrel = document.createTextNode("Barrel");
		h5barrel.appendChild(t_barrel);
		document.getElementById("barrel3d").appendChild(h5barrel);
		</script>
			<h6 style="font-size:15px">Geometry: Sphere + Cube</h6>
			<p>Under Construction.</p>
		</div>
		</div>
		<a href="#page3" data-transition="slide"><div id="nextbutton" class="scroll-btn link-scroll"><i class="fas fa-angle-double-right"></i></div></a><!-- /page -->
	</section>
</div>

<!-- Start of third page -->
<div data-role="page" id="page3" >
  <h2 style="padding-top:20px" class="text-uppercase" >Part II: CREATING A VIDEO</h2>
	<h4 class="font-italic lead lined"> A camera is placed in the center of the geometry </h4>
<div align="center">
<script>
var proj= 
function prog(x){
	
}
</script>
		<form id="projForm">
		<h5 style="margin:20px">Projection</h5>
         <fieldset data-role = "controlgroup"  id="forms1" style ="font-size:8px;width:50%">
            <input type = "radio" id = "equi" name = "radio-choice-0" value="equi" checked = "checked" onclick="setEqui()"/>
            <label style="font-size:15px" for = "equi">Equi-Rectangular </span></label>

            <input type = "radio" id = "cube" name = "radio-choice-0" value="cube"  onclick="setCube()" />
            <label style="font-size:15px" for = "cube">Cube</label>

            <input type = "radio" id = "eac" name = "radio-choice-0" value="eac" onclick="setEAC()" />
            <label style="font-size:15px" for = "eac">Equi-Angular</label>
			 
			<input type = "radio" id = "barrel" disabled name = "radio-choice-0" value="barrel"/>
            <label style="font-size:15px"  for = "barrel"  disabled >Barrel</label>
         </fieldset>
      </form>
	  </div>
	  <div align="center">
		<h5 style="margin:20px">Video</h5>
		<form >
         <fieldset data-role = "controlgroup" style ="font-size:8px;width:50%">
            <input type = "radio" id = "orion" name = "radio-choice-1" checked = "checked" onclick="setOrion()" />
            <label style="font-size:15px" for = "orion">Orion360</label>
			
            <input type = "radio" id = "star" name = "radio-choice-1" onclick="setStarWars()"  />
            <label style="font-size:15px" for = "star" >Star Wars</label>
			
            <input type = "radio" id = "scuba" name = "radio-choice-1" onclick="setScuba()" />
            <label style="font-size:15px" for = "scuba"  disabled>Amusement Park</label> 
	

         </fieldset>
      </form>
	  </div>
	  <a style="width:100%" href="#page4" onclick="change()">
		<h5>Click to watch</h5>
	  </a>
</div><!-- /page -->

<!-- Start of four page -->
<div data-role="page" id="page4">
	<div id="final3d"></canvas>
			<script>
			var proj ="equi";
			var vid = "";
			
			function setEqui(){
			proj='equi';
			
			}
			function setCube(){
			proj='cube';
			
			}
			function setEAC(){
			proj='eac';
		
			}
			function setOrion(){
			vid='orion';
			
			}
			function setStarWars(){
			vid='star';
			
			}
			function setScuba(){
			vid='scuba';
		
			}
		
			//const val = $('input[name=radio-choice-0]:checked').val();
			//alert($("input[name=rate]:checked").val());
			//alert(val);
			var x = screen.innerWidth;
			var y = screen.innerHeight;
			var final3d = document.getElementById("final3d");
			var CANVAS_WIDTH = x;
			var CANVAS_HEIGHT = y;

			var finalScene = new THREE.Scene();
			var finalCamera = new THREE.PerspectiveCamera(55, CANVAS_WIDTH / CANVAS_HEIGHT, 0.1, 100);

			var finalRenderer = new THREE.WebGLRenderer();
			finalRenderer.setClearColor(0x000, 1.0);
			finalRenderer.setSize(CANVAS_WIDTH, CANVAS_HEIGHT);
			final3d.appendChild(finalRenderer.domElement);
		
		function change(){
		if (proj == 'equi'){
			if(vid == 'orion'){ 
				 document.getElementById("video").src = "https://raw.githubusercontent.com/FinweLtd/orion360-sdk-test-content/master/set1/equi/Orion360_test_video_1920x960.mp4";
			}else if(vid == 'scuba') { 
				 document.getElementById("video").src = "https://raw.githubusercontent.com/kjones47/Projections360/gh-pages/vids/amusementpark.mp4";
			}else if(vid == 'star') { 
				alert('IN PROGRESS');
				 document.getElementById("video").src = "https://raw.githubusercontent.com/kjones47/Projections360/gh-pages/starwars.mp4";
			}
		}else if(proj == 'cube'){
			if(vid == 'orion') { 
				 document.getElementById("video").src= "https://raw.githubusercontent.com/kjones47/Projections360/gh-pages/oriontestvideo_CUBE.mp4";
			}else if(vid == 'scuba') { 
				 alert('IN PROGRESS');
				 document.getElementById("video").src="https://raw.githubusercontent.com/kjones47/Projections360/gh-pages/scubadive_cube.mp4";
			}else if(vid == 'star') { 
				document.getElementById("video").src= "https://raw.githubusercontent.com/kjones47/Projections360/gh-pages/starwars.mp4";
			}
		}else if(proj == 'eac'){
		alert('eac');
			if(vid == 'orion') { 
				 document.getElementById("video").src = "https://raw.githubusercontent.com/kjones47/Projections360/gh-pages/oriontestvideo_EAC.mp4";
			}else if(vid == 'scuba') { 
				alert('IN PROGRESS');
				document.getElementById("video").src = "https://raw.githubusercontent.com/kjones47/Projections360/gh-pages/scubadive.mp4";
			}else if(vid == 'star') { 
				document.getElementById("video").src = "https://raw.githubusercontent.com/kjones47/Projections360/gh-pages/starwars.mp4";
			}
		}
		
			var finalVid = document.getElementById( 'video' );
			finalVid.play();
			var textureFinal = new THREE.VideoTexture( finalVid );
			
			var finalGeo;
			if(document.getElementById('equi').checked){
				finalGeo = new THREE.SphereBufferGeometry(3, 28, 28 );
			}else{
				finalGeo = new THREE.BoxGeometry(3, 3, 3 );
				textureFinal.minFilter = THREE.LinearFilter;
				textureFinal.magFilter = THREE.LinearFilter;
				textureFinal.format = THREE.RGBFormat;
				
			var face4 = [new THREE.Vector2(0, .5), new THREE.Vector2(.3333, .5), new THREE.Vector2(.3333, 1), new THREE.Vector2(0, 1)];
			var face3 = [new THREE.Vector2(.3333, .5), new THREE.Vector2(.6666, .5), new THREE.Vector2(.6666, 1), new THREE.Vector2(.3333, 1)]; 
			var face1 = [new THREE.Vector2(.6666, .5), new THREE.Vector2(1, .5), new THREE.Vector2(1, 1), new THREE.Vector2(.6666, 1)]; //left
			var face2 = [new THREE.Vector2(0, 0), new THREE.Vector2(.3333, 0), new THREE.Vector2(.3333, .5), new THREE.Vector2(0, .5)]; //right
			var face5 = [new THREE.Vector2(.3333, 0), new THREE.Vector2(.6666, 0), new THREE.Vector2(.6666, .5), new THREE.Vector2(.3333, .5)]; //front
			var face6 = [new THREE.Vector2(1, .5), new THREE.Vector2(.6666, .5), new THREE.Vector2(.6666, 0), new THREE.Vector2(1, 0)]; //bottom
			
			finalGeo.faceVertexUvs[0] = [];

			finalGeo.faceVertexUvs[0][0] = [face1[0], face1[1], face1[3]];
			finalGeo.faceVertexUvs[0][1] = [face1[1], face1[2], face1[3]];

			finalGeo.faceVertexUvs[0][2] = [face2[0], face2[1], face2[3]];
			finalGeo.faceVertexUvs[0][3] = [face2[1], face2[2], face2[3]];

			finalGeo.faceVertexUvs[0][4] = [face3[0], face3[1], face3[3]];
			finalGeo.faceVertexUvs[0][5] = [face3[1], face3[2], face3[3]];

			finalGeo.faceVertexUvs[0][6] = [face4[0], face4[1], face4[3]];
			finalGeo.faceVertexUvs[0][7] = [face4[1], face4[2], face4[3]];

			finalGeo.faceVertexUvs[0][8] = [face5[0], face5[1], face5[3]];
			finalGeo.faceVertexUvs[0][9] = [face5[1], face5[2], face5[3]];

			finalGeo.faceVertexUvs[0][10] = [face6[0], face6[1], face6[3]];
			finalGeo.faceVertexUvs[0][11] = [face6[1], face6[2], face6[3]];
			
			finalGeo.rotateY(Math.PI/2);
			finalGeo.rotateX(Math.PI/2);
			}
			
			finalGeo.scale(-1,1,1);
			var finalMat = new THREE.MeshBasicMaterial( { map: textureFinal, side: THREE.DoubleSide } );
			var finalMesh = new THREE.Mesh( finalGeo, finalMat );
			finalScene.add( finalMesh );
			
			var finalControls = new THREE.OrbitControls( finalCamera, finalRenderer.domElement );
			finalControls.minDistance = 1;
			finalControls.maxDistance = 1.1;
			
			finalCamera.position.z = 1;
			
			}
			var finalAnimate = function () {
				requestAnimationFrame( finalAnimate );

				//finalMesh.rotation.x += 0.01;
				//finalMesh.rotation.y += 0.01;

				finalRenderer.render( finalScene, finalCamera );
			};
			
			function onWindowResize() {
				finalCamera.aspect = window.innerWidth / window.innerHeight;
				finalCamera.updateProjectionMatrix();
				finalRenderer.setSize( window.innerWidth, window.innerHeight );
			}

			finalAnimate();
			onWindowResize();
		</script>
	</div><!-- /content -->
</div><!-- /page -->

</body>
</html>